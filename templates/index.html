<!DOCTYPE html>
<html>
<head>
    <title>Altınyıldız AI</title>
    <style>
        body { font-family: Arial; padding: 40px; background: #f4f4f4; }
        textarea { width: 100%; height: 100px; }
        button { padding: 10px 20px; margin-top: 10px; }
        #loading { color: orange; font-weight: bold; margin-top: 15px; display:none; }
        #response { margin-top: 20px; white-space: pre-wrap; background: white; padding: 15px; }
    </style>
</head>
<body>

<h2>Altınyıldız AI</h2>

<textarea id="user_input" placeholder="Sorunu yaz..."></textarea>
<br>
<button onclick="sendMessage()">Gönder</button>

<div id="loading">Analiz ediliyor...</div>
<div id="response"></div>

<script>
function sendMessage() {
    const input = document.getElementById("user_input").value;
    const loading = document.getElementById("loading");
    const responseDiv = document.getElementById("response");

    loading.style.display = "block";
    responseDiv.innerHTML = "";

    fetch("/", {
        method: "POST",
        headers: {
            "Content-Type": "application/x-www-form-urlencoded"
        },
        body: "user_input=" + encodeURIComponent(input)
    })
    .then(response => response.text())
    .then(html => {
        loading.style.display = "none";

        // Sunucudan gelen HTML içinden sadece cevabı çekiyoruz
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");
        const newResponse = doc.querySelector(".response");

        if (newResponse) {
            responseDiv.innerHTML = newResponse.innerHTML;
        }
    });
}
</script>

</body>
</html>